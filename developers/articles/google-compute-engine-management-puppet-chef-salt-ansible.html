<!DOCTYPE html>
<html lang="" class="maia" devsite>
  <head>
    <title>Compute Engine Management with Puppet, Chef, Salt, and Ansible - Google Cloud Platform</title>
    <meta charset="utf-8" />
    <link rel="shortcut icon" href="/images/gcp-favicon.ico">
    <link rel="apple-touch-icon" href="/images/apple-touch-icon.png">

    <!--[if lt IE 9]>
    <script src="/js/html5.js"></script>
    <![endif]-->

    <meta name="google-site-verification" content="8dOEM3Xenm6yaBc83y2WKgqQG0iHI7Ph6Rl_YLIZLQ8" />
    <meta name="viewport" content="initial-scale=1, minimum-scale=1, width=device-width">

    <!-- GSAP animation frameworks -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
    <script src="//www.gstatic.com/external_hosted/gsap/TweenMax.min.js"></script>
    <script src="//www.gstatic.com/external_hosted/gsap/TimelineMax.min.js"></script>
    <script src="/js/floodlight.js"></script>

    <link href="//fonts.googleapis.com/css?family=Open+Sans:400italic,300,400,600,700" rel="stylesheet">
    <link href="//www.google.com/css/maia.experimental.css" rel="stylesheet">
    <link href="/css/maia-cloud.css" rel="stylesheet"/>
    <link href="/css/default.css" rel="stylesheet">
  </head>
  <body>
  <div id="maia-header">
    <div class="maia-aux">
      <h1><a href="/"><img src="/images/gcp-logo.png" alt="Cloud Platform" data-retina="383x48"></a></h1>

<div class="search-container">
  <form action="/search" class="maia-search">
    <input type="text" placeholder="Search this site" name="q">
    <button class="maia-button" type="submit" data-g-event="Maia: Button" data-g-action="Maia: Primary â€“ Header" data-g-label="Search">
      <span class="maia-search-icon"></span>
    </button>
  </form>
  <div class="cloud-social">

    <div class="cloud-signed-in">
      <a href="https://console.developers.google.com/" event="autotrack-data-g" data-g-event="Global Nav" data-g-action="Nav Bar" data-g-label="Go to my console">Go to Cloud Console</a>
    </div>

  </div>

</div>

</div>

    </div>
  </div>
  <div id="maia-nav-x" class="maia-nav">
    <div class="maia-aux">
   <div class="cp-cta">
     <a class="cp-track maia-button maia-button-secondary white-button" href="/contact/"></a>
     
       <a class="cp-track maia-button blue-button" href="https://console.developers.google.com?getstarted=https://cloud.google.com" style="color: #ffffff;"></a>
     
   </div>
      <ul>
        <li >
            <a href="/why-google/" event="autotrack-data-g" data-g-event="Global Nav" data-g-action="Nav Bar" data-g-label="Why Google">
            
            </a>
        </li>
        <li  id="main-nav-product-dropdown">
            <a href="/products/" event="autotrack-data-g" data-g-event="Global Nav" data-g-action="Nav Bar" data-g-label="Products">
            
            </a>
        </li>
        <li >
            <a href="/solutions/" event="autotrack-data-g" data-g-event="Global Nav" data-g-action="Nav Bar" data-g-label="Solutions">
            
            </a>
        </li>
        <li >
            <a href="/customers/" event="autotrack-data-g" data-g-event="Global Nav" data-g-action="Nav Bar" data-g-label="Customers">
            
            </a>
        </li>
        <li  class="active" >
            <a href="/developers/" event="autotrack-data-g" data-g-event="Global Nav" data-g-action="Nav Bar" data-g-label="Developers">
          
            </a>
        </li>
        <li >
            <a href="/support/" event="autotrack-data-g" data-g-event="Global Nav" data-g-action="Nav Bar" data-g-label="Support">
            
            </a>
        </li>
        <li >
            <a href="/partners/" event="autotrack-data-g" data-g-event="Global Nav" data-g-action="Nav Bar" data-g-label="Partners">
            
            </a>
        </li>
      </ul>
    </div>
  </div>

<!-- Products subnav -->
<div id="maia-nav-x" class="maia-nav products-nav">
  <div class="maia-aux">
    <div class="products-nav-dropdown maia-cols">

      <div id="compute-dropdown" class="products-column maia-col-2">
        <span class="product-list-title">Compute</span>
        <div class="dropdown-item-container">
          <a href="/products/compute-engine/">
            <span class="product-name">Compute Engine</span>
          </a>
        </div>
        <div class="dropdown-item-container">
          <a href="/products/app-engine/">
            <span class="product-name">App Engine</span>
          </a>
        </div>
      </div>

      <div id="storage-dropdown" class="products-column maia-col-2">
        <span class="product-list-title">Storage</span>
        <div class="dropdown-item-container">
          <a href="/products/cloud-sql/">
            <span class="product-name">Cloud SQL</span>
          </a>
        </div>
        <div class="dropdown-item-container">
          <a href="/products/cloud-storage/">
            <span class="product-name">Cloud Storage</span>
          </a>
        </div>
        <div class="dropdown-item-container">
          <a href="/products/cloud-datastore/">
            <span class="product-name">Cloud Datastore</span>
          </a>
        </div>
      </div>

      <div id="big-data-dropdown" class="products-column maia-col-2">
        <span class="product-list-title">Big Data</span>
        <div class="dropdown-item-container">
          <a href="/products/bigquery/">
            <span class="product-name">BigQuery</span>
          </a>
        </div>
      </div>

      <div id="services-dropdown" class="products-column maia-col-2">
        <span class="product-list-title">Services</span>
        <div class="dropdown-item-container">
          <a href="/products/cloud-dns/">
            <span class="product-name">Cloud DNS</span>
          </a>
        </div>
        <div class="dropdown-item-container">
          <a href="/products/cloud-endpoints/">
            <span class="product-name">Cloud Endpoints</span>
          </a>
        </div>
        <div class="dropdown-item-container">
          <a href="/products/translate-api/">
            <span class="product-name">Translate API</span>
          </a>
        </div>
        <div class="dropdown-item-container">
          <a href="/products/prediction-api/">
            <span class="product-name">Prediction API</span>
          </a>
        </div>
        <div class="dropdown-item-container">
          <a href="/products/cloud-pubsub/">
            <span class="product-name">Cloud Pub/Sub</span>
          </a>
        </div>
      </div>

      <div id="management-dropdown" class="products-column maia-col-2">
        <span class="product-list-title">Management</span>
        <div class="dropdown-item-container">
          <span class="product-name"><a href="/products/cloud-deployment-manager/">Cloud Deployment Manager</a></span>
        </div>
      </div>

      <div id="pricing-dropdown" class="products-column maia-col-2">
        <span class="product-list-title">Pricing</span>
        <div class="dropdown-item-container">
          <span class="product-name"><a href="/products/pricing/">Overview</a></span>
        </div>
        <div class="dropdown-item-container">
          <span class="product-name"><a href="/products/calculator/">Calculator</a></span>
        </div>
      </div>
    </div>
  </div>
</div>

<div id="maia-main" class="cp-article">
  <div class="maia-cols">
    <div class="maia-col-9">

      <div>
        <div style="float:right"><div class="g-plusone"></div></div>
        <h1 class="title">Compute Engine Management with Puppet, Chef, Salt, and Ansible</h1>
      </div>

      

<style>
table th {
  color: #FFF;
  background-color: #6199df;
  text-align: left;
}

table td {
  text-align: left;
}

h3 {
  font-size: 15px;
}
h4 {
  font-size: 14px;
}
h6 {
  font-weight: bold;
}

.c64 {
  vertical-align: baseline;
  font-size: 10pt;
  font-style: normal;
  font-family: "Open Sans";
  text-decoration: none;
  font-weight: 400;
}

.c80 {
  vertical-align: baseline;
  font-size: 10pt;
  font-style: normal;
  font-family: "Open Sans";
  text-decoration: none;
}

.c2 {
  line-height: 1.0;
  padding-top: 0;
  height: 10pt;
  direction: ltr;
}

.c6 {
  padding-left: 0;
  line-height: 1.1079545454545454;
  padding-top: 0;
  margin-left: 36pt;
}

.c13 {
  padding-left: 0;
  margin-left: 36pt;
  padding-bottom: 0;
}

.c7 {
  padding-top: 10pt;
  widows: 2;
  orphans: 2;
}

.c1 {
  color: #222;
  font-size: 9pt;
  font-family: "Courier New";
}

.c40 {
  margin-right: auto;
  border-collapse: collapse;
}

.c12 {
  line-height: 1.0;
  padding-top: 0;
  padding-bottom: 0;
}

.c17 {
  line-height: 1.0;
  padding-top: 0;
  margin-left: 36pt;
}

.c23 {
  padding-left: 0;
  margin-left: 36pt;
}

.c14 {
  padding-top: 11pt;
  padding-bottom: 2pt;
}

.c16 {
  color: #900;
  font-weight: 700;
}

.c5 {
  color: inherit;
  text-decoration: inherit;
}

.c25 {
  line-height: 1.1079545454545454;
  height: 10pt;
}

.c8 {
  font-size: 9pt;
  font-family: "Courier New";
}

.c9 {
  padding-top: 10pt;
  padding-bottom: 0;
}

.c74 {
  height: 1px;
  width: 33%;
}

.c62 {
  padding-top: 12pt;
  padding-bottom: 2pt;
}

.c10 {
  margin: 0;
  padding: 0;
}

.c32 {
  padding-left: 0;
  margin-left: 72pt;
}

.c76 {
  margin-right: auto;
  border-collapse: collapse;
}

.c47 {
  height: 10pt;
  text-align: right;
}

.c22 {
  widows: 2;
  orphans: 2;
}

.c36 {
  color: #666;
  font-size: 11pt;
}

.c20 {
  height: 10pt;
  margin-left: 36pt;
}

.c72 {
  padding-top: 14pt;
  padding-bottom: 4pt;
}

.c3 {
  color: #15c;
  text-decoration: underline;
}

.c78 {
  font-size: 11pt;
  font-family: Arial;
}

.c18 {
  line-height: 1.0;
  padding-top: 0;
}

.c75 {
  max-width: 504pt;
  padding: 72pt 54pt;
}

.c70 {
  text-align: right;
}

.c29 {
  color: #222;
}

.c81 {
  color: #1c4587;
}

.c52 {
  padding-bottom: 0;
}

.c31 {
  line-height: 1.1079545454545454;
}

.c26 {
  color: #15c;
}

.c51 {
  background-color: #fff;
}

.c63 {
  color: #00f;
}

.c28 {
  text-align: left;
}

.c69 {
  color: #61c;
}

.c50 {
  height: 10pt;
}

.c37 {
  text-indent: 36pt;
}

.c33 {
  margin-left: 36pt;
}

.c42 {
  color: #900;
}

.c65 {
  text-align: center;
}

.c11 {
  font-family: "Courier New";
}

.c67 {
  page-break-after: avoid;
}

.c44 {
  /*background-color: #333;*/
}

.c68 {
  color: #666;
}

.c79 {
  text-decoration: underline;
}

.c30 {
  color: #fff;
}

.c48 {
  color: #38761d;
}

.c15 {
  height: 0;
}

.c21 {
  padding-top: 0;
}

.c19 {
  font-weight: 700;
}

.c4 {
  direction: ltr;
}

.c41 {
  height: 14pt;
}

.c56 {
  color: #3c78d8;
}

.c0 {
  font-style: italic;
}

</style>

<div class="cp-article-tutorial">

<h2 class="c4"><a name="h.s1lr53w9fhic" id=
  "h.s1lr53w9fhic"></a><span>Introduction</span></h2>

  <p class="c4"><span class="c3"><a class="c5" target="_blank" href=
  "http://cloud.google.com/products/compute-engine">Google Compute
  Engine</a></span><span class="c29">&nbsp;enables you to rapidly bring up a fleet of
  virtual machines. Once this virtual datacenter is up, you want to get the software that
  runs your services installed, configured, and running quickly. As your service grows
  and your engineers develop new features, you'll regularly need to deploy
  changes.</span></p>

  <p class="c4"><span>With pressure to</span>
  <span>move</span><span>&nbsp;quickly,</span> <span>software is often installed and
  configured by hand. This can quickly lead to systems that are difficult and expensive
  to maintain and cannot be replicated for capacity expansion, development, or
  testing.</span><span>&nbsp;The ability to consistently and reliably manage your
  software and compute resources is essential.</span></p>

  <p class=" c4"><span class="c29">Over the last decade, a vibrant</span> <span class=
  "c3"><a class="c5" target="_blank" href=
  "http://en.wikipedia.org/wiki/Comparison_of_open_source_configuration_management_software">
  ecosystem</a></span><span class="c29">&nbsp;of open source tools has emerged to manage
  the complexity of large-scale compute deployments. These tools can enable you to keep
  your services' uptime high and operational costs low.</span></p>

  <h2 class="c21 c4"><a name="h.wbbok1c4ubmz" ></a><span>Scenario and
  Scope</span></h2>

  <p class="c4"><span>The primary audience for this paper are technical leads involved in
  deploying and optimizing computing systems on Google Compute Engine. We aim to help you
  understand resource deployment on Google Compute Engine, and how you can use the
  software management tools discussed to manage your compute infrastructure.</span></p>

  <p class="c4"><span>You likely have a variety of</span> <span>service</span><span>s to
  maintain. Some of your compute services, such as your websites and databases, need to
  be kept running continuously. Other services run on a regular schedule, such as daily
  Hadoop jobs for log file processing. Still other services you run episodically, such as
  a</span> <span>novel</span><span>&nbsp;data processing job or a demo for a
  conference.</span></p>

  <p class="c4"><span>As you take advantage of the Google Cloud infrastructure and
  quickly grow your compute services, it can be challenging to maintain strong
  operational control over the fleet of instances running your software.</span>
  <span>Among</span><span>&nbsp;your management tasks are:</span></p>

  <ul class="c10 lst-kix_t5durty426yi-0 start">
    <li class="c23 c4"><span>Creating and destroying virtual instances</span></li>

    <li class="c23 c4"><span>Installing, configuring, and upgrading software on virtual
    instances</span></li>

    <li class="c23 c4"><span>Configuring disks, networks, and firewalls</span></li>

    <li class="c23 c4"><span>Configuring load balancing</span></li>

    <li class="c23 c4"><span>Monitoring running virtual instances</span></li>

    <li class="c23 c4"><span>Monitoring software on virtual instances</span></li>
  </ul>

  <p class="c4"><span>Many commercial and open source tools have been developed to
  address these and related tasks. This paper focuses on a specific set of open source
  tools to solve a specific set of tasks:</span></p>

  <ul class="c10 lst-kix_q3719kbk2utb-0 start">
    <li class="c23 c4"><span>Creating and destroying virtual instances</span></li>

    <li class="c23 c4"><span>Installing, configuring, and upgrading software on virtual
    instances</span></li>
  </ul>

  <p class="c4"><span>We will point out places where these tools can also be used
  for:</span></p>

  <ul class="c10 lst-kix_g6194xernj3k-0 start">
    <li class="c23 c4"><span>Configuring disks, networks, and firewalls</span></li>

    <li class="c23 c4"><span>Configuring load balancing</span></li>
  </ul>

  <p class="c4 "><span>This paper does not address monitoring of virtual instances or
  application software, nor focus on software management practices such as continuous
  delivery, integration, and deployment.</span> <span>This
  paper</span><span>&nbsp;</span><span>also</span><span>&nbsp;makes no attempt at
  endorsing one tool over another.</span></p>

  <h2 class="c4 c21"><a name="h.hd790ud2ssbm" ></a><span>Overview of
  the Solution</span></h2>

  <p class="c4"><span>Tools that manage your systems will save you time and money by
  allowing you to:</span></p>

  <ul class="c10 lst-kix_gpfseeyjs445-0 start">
    <li class="c23 c4"><span>Deploy changes more rapidly</span></li>

    <li class="c23 c4"><span>Recover faster from node failures</span></li>

    <li class="c23 c4"><span>Take unused resources out of service</span></li>
  </ul>

  <p class="c4"><span>Google provides the basic building blocks for Compute Engine
  resource management with the</span> <span class="c3"><a class="c5" target="_blank" href=
  "https://developers.google.com/compute/docs/reference/latest/">Compute Engine
  API</a></span><span>&nbsp;and the</span> <span class="c3"><a class="c5" target="_blank" href=
  "https://developers.google.com/compute/docs/gcutil/">gcutil</a></span><span>&nbsp;</span><span>command
  line tool. You can use either along with custom installation scripts to build an
  infrastructure for managing your Compute Engine resources and the software running on
  your Compute Engine instances.</span></p>

  <p class="c4"><span>However, the Compute Engine API and</span> <span class=
  "c11">gcutil</span><span>&nbsp;are built for resource management rather than software
  management</span><span>. As the complexity of your compute infrastructure grows, you
  may benefit from tools designed for software management. This paper focuses on the use
  of a specific set of open source software management tools (</span><span>discussed in
  the order in which they became publicly available</span><span>),</span> <span>and ways
  in which they can be used to manage Compute Engine resources and the software running
  on Compute Engine instances</span><span>:</span></p>

  <ul class="c10 lst-kix_f58rz8bbhcaz-0 start">
    <li class="c23 c4"><span>Puppet</span></li>

    <li class="c23 c4"><span>Chef</span></li>

    <li class="c23 c4"><span>Salt</span></li>

    <li class="c23 c4"><span>Ansible</span></li>
  </ul>

  <p class="c4"><span>No single approach to resource and software management fits all
  organizations. To help you determine how these tools can expedite management of your
  services, we will first walk you through the Compute Engine runtime
  environment&mdash;how instances boot and get their initial software set. Next, we will
  discuss software upgrades with an eye towards the full instance lifecycle.</span></p>

  <p class="c4"><span>With an understanding of Compute Engine lifecycle
  management,</span> <span class="c29">we will then look at the common architectural
  models employed by these management tools</span><span>.</span><span>&nbsp;The paper
  wraps up by analyzing individual tools and how they integrate with Google Compute
  Engine.</span></p>

  <h3 class="c4"><a name="h.uksmy6d8ymxn" ></a><span>Compute Engine
  instance and software lifecycle</span></h3>

  <p class="c4"><span>Google</span><span>&nbsp;Compute Engine enables you to boot</span>
  <span>virtual machine instances running in Google datacenter</span><span>s. The basic
  components of a virtual machine are shown in Figure 1.</span></p>

  <p class="c4"><img src="/images/compute-engine-puppet-salt-image_1.png" width="672" /></p>

  <p class="c65 c4"><span>Figure 1: Google Compute Engine core runtime
  components</span></p>

  <p class="c4"><span>When you create a Compute Engine instance, you must
  specify:</span></p>

  <ul class="c10 lst-kix_fvzlygy7gel3-0 start">
    <li class="c23 c4"><span>Machine Type&mdash;determines CPU and memory</span></li>

    <li class="c23 c4"><span>Boot Disk&mdash;contains Operating System (OS)
    image</span></li>
  </ul>

  <p class="c4"><span>You may optionally specify:</span></p>

  <ul class="c10 lst-kix_fvzlygy7gel3-0">
    <li class="c23 c4"><span>External IP address</span></li>

    <li class="c23 c4"><span>Network and firewall rules</span></li>

    <li class="c23 c4"><span>Data disk(s)</span></li>

    <li class="c23 c4"><span>Metadata</span></li>
  </ul>

  <p class="c4"><span>For more information on Google Compute Engine resources, see</span>
  <span class="c3"><a class="c5" target="_blank" href=
  "https://developers.google.com/compute/docs/overview">https://developers.google.com/compute/docs/overview</a></span><span>.</span></p>

  <h4 class="c4"><a name="h.up4crexzhacs" ></a><span>Instance boot and
  initialization</span></h4>

  <p class="c4"><span>W</span><span>e now</span> <span>describe how an instance boots and
  gets its initial software set.</span> <span>The speed at which</span><span>&nbsp;this
  can be done</span><span>&nbsp;impacts</span> <span>the way</span><span>&nbsp;one
  approaches software upgrades. With a set of boot, install, and upgrade models in mind,
  we will then look at how software management tools can aid this endeavor.</span></p>

  <h5 class="c4"><a name="h.5kjsugw1kowb" id="h.5kjsugw1kowb"></a><span>Build a custom
  boot disk snapshot</span></h5>

  <p class="c4"><span class="c54">A virtual machine boots from a</span> <span class=
  "c3"><a class="c5" target="_blank" href="https://developers.google.com/compute/docs/disks">persistent
  disk</a></span><span class="c54">&nbsp;that you
  create.</span><span>&nbsp;</span><span class="c54">You may pre-install any software you
  need on the boot disk, which will give you the fastest startup times for your
  instances.</span></p>

  <p class="c4"><span>Once your boot disk is configured correctly,</span> <span>you can
  create a</span> <span class="c3"><a class="c5" target="_blank" href=
  "https://developers.google.com/compute/docs/disks#snapshots">snapshot</a></span><span>&nbsp;of
  it as the</span><span>&nbsp;bas</span><span>is</span><span>&nbsp;for booting other
  instances</span><span>.</span></p>

  <p class="c4"><span>To</span><span>&nbsp;create an initial boot disk
  snapshot:</span></p>

  <ol class="c10 lst-kix_op08xun2xffs-0 start" start="1">
    <li class="c23 c4"><span>Create a persistent disk from a</span> <span class=
    "c3"><a class="c5" target="_blank" href=
    "https://developers.google.com/compute/docs/images#availableimages">stock</a></span><span>&nbsp;or</span>
    <span class="c3"><a class="c5" target="_blank" href=
    "https://developers.google.com/compute/docs/premium-operating-systems">premium</a></span><span>&nbsp;operating
    system image</span><span>.</span></li>

    <li class="c23 c4"><span>Boot a Compute Engine instance from the persistent
    disk.</span></li>

    <li class="c23 c4"><span>Install software onto the instance&rsquo;s boot
    disk.</span></li>

    <li class="c23 c4"><span>Terminate</span> <span>the Compute Engine
    instance</span><span>&nbsp;without deleting its boot disk.</span></li>

    <li class="c23 c4"><span>Take a snapshot of the boot</span>
    <span>disk</span><span>&nbsp;with the Compute Engine API or</span> <span class=
    "c11">gcutil</span><span>.</span></li>
  </ol>

  <h5 class="c4"><a name="h.5jds6mf1kb9d" ></a><span>Install software
  upon instance start</span></h5>

  <p class="c4"><span>An alternative approach to getting your software onto a</span>
  <span>new</span><span>&nbsp;instance is to boot from a stock image and then install
  software on the instance once it is running. One recommended method is to</span>
  <span>specify</span> <span>a</span> <span class="c3"><a class="c5" target="_blank" href=
  "https://developers.google.com/compute/docs/howtos/startupscript">startup-script</a></span><span>&nbsp;in
  your instance</span> <span class="c3"><a class="c5" target="_blank" href=
  "https://developers.google.com/compute/docs/metadata">metadata</a></span><span>&nbsp;and
  execute it on startup of the virtual machine instance. The startup script may download
  and install any software available to it</span><span>. Software</span> <span>may be
  pulled from standard repositories, individual package download sites, or from Google
  Cloud Storage</span><span>.</span></p>

  <h4 class="c4"><a name="h.c25j9hktsdc9" ></a><span>Software
  upgrades&mdash;the full lifecycle</span></h4>

  <p class="c4"><span>These different capabilities for quickly and easily replicating
  boot environments for virtual instances</span> <span>add</span><span>&nbsp;a management
  dimension not typically found with physical machines. The software on physical machines
  is upgraded in place with the machine running. On virtual machines , this model can be
  used, but you can also upgrade a virtual machine by changing the boot procedure
  and</span> <span>starting</span><span>&nbsp;a new instance.</span></p>

  <h5 class="c4"><a name="h.a0sav3f2c64q" ></a><span>Upgrade via
  restart and reinstall</span></h5>

  <p class="c4"><span>For many services you can upgrade a virtual machine as
  follows:</span></p>

  <ol class="c10 lst-kix_i5vf16atxxyj-0 start" start="1">
    <li class="c23 c4"><span>Update</span><span>&nbsp;the</span><span>&nbsp;startup
    script.</span></li>

    <li class="c23 c4"><span>Terminate the existing virtual instance (preserving data
    disks, if any).</span></li>

    <li class="c23 c4"><span>Start a new virtual instance specifying the startup script
    in the instance metadata.</span></li>
  </ol>

  <h5 class="c14 c4"><a name="h.hl4if29k2x25" ></a><span>Upgrade via
  restart with a new boot disk</span></h5>

  <p class="c4"><span>Alternatively, you can upgrade a virtual machine by using prepared
  boot disks. Rerun the</span> <span class="c3"><a class="c5" href="#h.5kjsugw1kowb">boot disk snapshot creation process</a></span><span>, and then do
  the following:</span></p>

  <ol class="c10 lst-kix_ij8dyqbp112v-0 start" start="1">
    <li class="c23 c4"><span>Terminate the existing virtual instance.</span></li>

    <li class="c23 c4"><span>Create a new boot disk from the new boot
    snapshot.</span></li>

    <li class="c23 c4"><span>Start a new virtual instance from the new boot
    disk.</span></li>
  </ol>

  <p class="c4"><span>In the context of these two approaches, the biggest advantage of
  using startup scripts is ease of management. For many applications one can upgrade a
  virtual instance with a code change and instance restart.</span></p>

  <p class="c4"><span>The biggest advantages of using a prepared boot disk are startup
  speed and consistency. With a fully prepared boot disk, you won't be impacted by a slow
  or unavailable software repository; your running software is completely under your
  control. In addition, you can maintain a history of certified boot disks. Should a
  problem occur after an upgrade, you may be able to</span>
  <span>recover</span><span>&nbsp;quickly by restarting instances from snapshots of known
  working boot disks.</span></p>

  <p class="c4"><span>A drawback of building your own boot disks is the cost of</span>
  <span>ongoing maintenance</span><span>. To upgrade one software component will</span>
  <span>require rerunning the</span> <span class="c3"><a class="c5" href=
  "#h.5kjsugw1kowb">boot disk snapshot creation process</a></span><span>&nbsp;as
  discussed above, or a variant such as:</span></p>

  <ol class="c10 lst-kix_yv9ikpnii7s9-0 start" start="1">
    <li class="c23 c4"><span>Boot a Compute Engine instance from your current boot
    disk.</span></li>

    <li class="c4 c23"><span>Upgrade the software on the boot disk.</span></li>

    <li class="c23 c4"><span>Terminate the Compute Engine instance.</span></li>

    <li class="c23 c4"><span>Take a snapshot of the persistent disk.</span></li>
  </ol>

  <h5 class="c4"><a name="h.vmfjpgmha6d3" id=
  "h.vmfjpgmha6d3"></a><span>Trade-offs</span></h5>

  <p class="c4"><span>Either</span> <span>approach of restarting instances is typically
  not as fast a path to upgrade as updating the software in
  place.</span><span>&nbsp;However, these two approaches exercise the instance boot path,
  which can be important for instance recovery and cloning (for scaling a
  service).</span></p>

  <p class=" c4"><span>Table 1 shows the trade-offs of each of the three upgrade
  approaches.</span></p><a href="#" name="c4925940b72ca8f1649e646a7bd1c76fdcc85285" id=
  "c4925940b72ca8f1649e646a7bd1c76fdcc85285"></a><a href="#" name="0"></a>

  <table cellpadding="0" cellspacing="0" class="c40">
    <tbody>
      <tr>
        <th class="c43 c44">
          <p class="c12 c4"><span class="c30 c19">Upgrade model</span></p>
        </th>

        <th class="c39 c44">
          <p class="c12 c28 c4"><span class="c30 c19">Pros</span></p>
        </th>

        <th class="c55 c44">
          <p class="c12 c4"><span class="c30 c19">Cons</span></p>
        </th>
      </tr>

      <tr>
        <td class="c43">
          <p class="c12 c4"><span>Upgrade in place</span></p>
        </td>

        <td class="c39">
          <p class="c12 c28 c4"><span>Speed</span></p>
        </td>

        <td class="c55">
          <p class="c12 c4"><span>Machine runtime may not be the same on instance
          restart</span></p>
        </td>
      </tr>

      <tr>
        <td class="c43">
          <p class="c4 c12"><span>Restart with new boot disk</span></p>
        </td>

        <td class="c39">
          <p class="c12 c4 c28"><span>Speed</span></p>

          <p class="c12 c28 c4"><span>Exercises instance recovery path</span></p>
        </td>

        <td class="c55">
          <p class="c12 c4"><span>Maintenance of boot disks</span></p>
        </td>
      </tr>

      <tr class="c15">
        <td class="c43">
          <p class="c18 c4"><span>Restart and reinstall</span></p>
        </td>

        <td class="c39">
          <p class="c18 c4"><span>Ease of maintenance</span></p>

          <p class="c18 c4"><span>Exercises instance recovery path</span></p>
        </td>

        <td class="c55">
          <p class="c18 c4"><span>Longer startup time</span></p>

          <p class="c18 c4"><span>Risk of software repository failure</span></p>
        </td>
      </tr>
    </tbody>
  </table><a href="#" name="id.9t0ji7th6b77" ></a>

  <p class="c7 c4 c65"><span>Table 1: Trade-offs for</span><span>&nbsp;different
  upg</span><span>rade models</span></p>

  <h3 class=" c4"><a name="h.nmlknwxmfqc" ></a><span>Resource and
  software management tool architectures</span></h3>

  <p class=" c21 c4"><span>The tools discussed in this paper</span><span>&nbsp;can
  help you to manage the full lifecycle of your Compute Engine instances and the software
  running on them. Puppet, Chef, Salt, and Ansible are all capable of:</span></p>

  <ul class="c10 lst-kix_uk0nqitrn4ab-0 start">
    <li class="c23 c21 c4">Managing virtual instances and
    disks</li>

    <li class="c23 c21 c4"><span>Managing software installation, upgrade, and
    configuration</span></li>
  </ul>

  <p class="c22 c21 c4"><span>These tools support two common runtime models&mdash;
  "Master/Agent" and "Standalone". Each tool implements at least one model, and</span>
  <span>Puppet, Chef, and Salt</span><span>&nbsp;implement both.</span></p>

  <p class="c22 c21 c4 c50"></p>

  <h4 class="c22 c21 c4"><a name="h.z4difkch5mqy" id=
  "h.z4difkch5mqy"></a><span>Master/Agent versus Standalone management</span></h4>

  <p class="c22 c52 c21 c4"><span>The runtime model you choose for your infrastructure
  will affect the cost and manageability of your services. As a general rule, smaller and
  less complicated deployments can benefit from the Standalone model while
  avoiding</span><span>&nbsp;the overhead of the Master/Agent model</span><span>, and
  larger, more complicated deployments call for the centralization and parallel
  operations that are better enabled by the Master/Agent model.</span></p>

  <p class="c22 c52 c50 c21 c4"></p>

  <h5 class="c22 c21 c4"><a name="h.lentaphqyurs" id=
  "h.lentaphqyurs"></a><span>Standalone</span></h5>

  <p class="c4"><span>The Standalone (or "Masterless") model has the least complexity and
  up-front cost. A high-level view of the Standalone model is shown in Figure
  2.</span></p>

  <p class="c65 c4"><img src="/images/compute-engine-puppet-salt-image_3.png" width=
  "561" /><span><br /></span><span>Figure 2: Standalone management of Compute Engine
  resources and instance software</span></p>

  <p class="c4"><span>In this model, management of Compute Engine resources and instance
  software is performed from one or more workstations or laptops within your
  organization. In its most basic form, ch</span><span>anges are explicitly initiated and
  pushed from a workstation.</span></p>

  <p class="c4"><span>In a variant of the Standalone model, configuration information is
  pushed to a central repository, such as Google Cloud Storage</span>
  <span>or</span><span>&nbsp;</span><span class="c3"><a class="c5" target="_blank" href=
  "http://en.wikipedia.org/wiki/GitHub">GitHub</a></span><span>. Instances are set up
  with a simple scheduling tool such as</span> <span class="c3"><a class="c5" target="_blank" href=
  "http://en.wikipedia.org/wiki/Cron">cron</a></span><span>&nbsp;to pull and apply the
  latest software and configuration.</span></p>

  <h5 class="c4"><a name="h.acplxx1k09zb" id=
  "h.acplxx1k09zb"></a><span>Master/Agent</span></h5>

  <p class=" c4"><span>In the Master/Agent (or "Server/Client") model, a machine is
  designated as the centralized, authoritative configuration management server to manage
  other Compute Engine resources and instance software. A high-level view of the
  Master/Agent model is shown in Figure 3.</span></p>

  <p class="c22 c65 c21 c4"><img src="/images/compute-engine-puppet-salt-image_2.png" width=
  "610" /><span><br />
  Figure 3: Master/Agent management of Compute Engine resources and instance
  software</span></p>

  <p class="c4"><span>In this model, administrators make configuration changes on the
  master, and the changes propagate to the managed instances to be applied locally.
  Managed instances report back to the master the success or failure of applying
  changes.</span> <span>Managed instances can receive software and configuration changes
  from the master in either a pull or push model.</span></p>

  <p class="c4"><span class="c19">Pull model</span><span>: The more traditional of the
  two approaches is the pull model. Agent software installed on the managed instance
  polls the master periodically for new configurations. Changes deployed in this model
  are expected to be applied "soon" (typically within a half hour).</span></p>

  <p class="c4"><span class="c19">Push model</span><span>: In this model, the master has
  the ability to push changes to agent nodes, generally using some form of</span>
  <span class="c3"><a class="c5" target="_blank" href=
  "http://en.wikipedia.org/wiki/Message-oriented_middleware">middleware</a></span><span>&nbsp;such
  as a</span> <span class="c3"><a class="c5" target="_blank" href=
  "http://en.wikipedia.org/wiki/Message_queue">message queue</a></span><span>. Changes
  deployed in this model are expected to be applied very quickly (within seconds or
  minutes).</span></p>

  <h6 class="c4"><a name="h.mvks5rfa25ke" ></a><span>Where to run the
  master?</span></h6>

  <p class="c4"><span>In the Master/Agent model, each client node runs client software
  that connects to the server software on the master. The master must be available to
  receive inbound connections from client hosts in the cloud. However, the firewalls of
  most organizations block inbound connections from hosts on the Internet.</span></p>

  <p class="c4"><span>Thus, typical choices for running the master software
  include:</span></p>

  <ul class="c10 lst-kix_evauspxn9t2a-0 start">
    <li class="c23 c4"><span>A Compute Engine instance</span></li>

    <li class="c23 c4"><span>A</span> <span class="c3"><a class="c5" target="_blank" href=
    "https://developers.google.com/compute/docs/networking#settingupvpn">Virtual Private
    Network connection</a></span><span>&nbsp;with your Compute Engine network on
    premises</span></li>

    <li class="c23 c4"><span>A hosted 3rd party solution</span></li>
  </ul>

  <h6 class="c4"><a name="h.uvl7p78o0g79" ></a><span>Master/Agent
  versus Standalone trade-offs</span></h6>

  <p class="c4"><span>The Master/Agent model increases the cost of getting started, both
  in the time spent setting up the master as well as the</span> <span>ongoing cost of
  running the master instance</span><span>. It can, however, provide additional benefits
  over the Standalone model</span> <span>and may be more appropriate for larger
  o</span><span>rganizations or deployments.</span></p>

  <p class="c4"><span>The benefits of the Master/Agent model derive from having a single
  holistic view of your deployments for your team. The</span>
  <span>m</span><span>aster</span><span>&nbsp;server has a database of "facts" of the
  entire system, which can allow you to make your service definitions more concise and
  manageable. The</span> <span>m</span><span>aster</span><span>&nbsp;server can also
  receive status reports from the agents, so that you have one place to check whether
  your services are running as configured.</span></p>

  <p class="c4"><span>Additional features of Master/Agent can include:</span></p>

  <ul class="c10 lst-kix_psqaw0b1u7dm-0 start">
    <li class="c23 c4"><span>Fine-grained access controls</span></li>

    <li class="c23 c4"><span>Group or role-based privilege separation</span></li>

    <li class="c23 c4"><span>Change logs for audit review</span></li>

    <li class="c23 c4"><span>Centralized views and reports</span></li>

    <li class="c23 c4"><span>Inventory categorization</span></li>
  </ul>

  <h2 class="c7 c4"><a name="h.syy4fnd4d8n1" ></a><span>Tools for the
  Solution</span></h2>

  <p class="c4"><span>This section discusses how to use some of the available open source
  software and resource management tools with Google Compute Engine.</span> <span class=
  "c29">Puppet, Chef, Salt, and Ansible can all be used with Compute Engine in ways that
  are consistent with how they are used in other environments. This paper is not intended
  to teach the basics of how to use each tool.</span></p>

  <p class="c7 c4"><span>If your organization already uses one of these tools for
  managing other systems, we hope to help you get started using it with Google Compute
  Engine. If you are not already using any of these tools, consider this a minimal primer
  to begin evaluating them.</span></p>

  <p class="c4"><span>You can build a very effective script-based, standalone resource
  and software management scheme using only Google's</span> <span class=
  "c11">gcutil</span><span>&nbsp;and scripts. You can find an overview of</span>
  <span class="c11">gcutil</span><span>&nbsp;in the</span> <span class="c3"><a class="c5"
  target="_blank" href="/developers/articles/google-compute-engine-management-puppet-chef-salt-ansible-appendix">Appendix</a></span><span>.</span></p>

  <p class="c4"><span>As your systems grow larger, the custom script code you write and
  maintain will grow and inevitably become more complicated. Puppet, Chef, Salt, and
  Ansible each provide a custom Domain Specific Language (DSL) or structured file format
  so that you can define the desired end state for your system without coding the
  procedures for getting there. In addition, rather than developing your definitions
  completely from scratch, you will be able to take advantage of open source community
  resources.</span></p>

  <h3 class="c7 c4"><a name="h.e33fhjqi5b2x" id=
  "h.e33fhjqi5b2x"></a><span>Puppet</span></h3>

  <p class="c4"><span class="c3"><a class="c5" target="_blank" href=
  "http://en.wikipedia.org/wiki/Puppet_(software)">Puppet</a></span><span>&nbsp;is a
  software and resource management tool from</span> <span class="c3"><a class="c5" target="_blank" href=
  "http://puppetlabs.com/">Puppet Labs</a></span><span>, first released in
  2005</span><span>. Core Puppet functionality (and all functionality discussed here) is
  free and open source. Puppet Labs provides additional tooling and features through
  Puppet Enterprise.</span></p>

  <p class="c4"><span>Puppet can be used to manage Google Compute Engine instances and
  the software running on them. You can use Puppet for:</span></p>

  <ul class="c10 lst-kix_jfj6zfmg1qpw-0 start">
    <li class="c23 c4"><span>Instance management with</span> <span class=
    "c0">node_gce</span><span>&nbsp;or</span> <span class="c0">gce_compute</span></li>

    <li class="c23 c4"><span>S</span><span>oftware deployment with</span> <span class=
    "c0">manifests</span></li>

    <li class="c23 c4"><span>B</span><span>oot disk preparation with</span> <span class=
    "c0">manifests</span></li>
  </ul>

  <p class="c4"><span>Puppet may be run in a Master/Agent or Standalone model. We will
  first discuss using Puppet to bring up Compute Engine instances, and then address
  software provisioning in the two runtime models.</span></p>

  <h4 class="c4"><a name="h.ovlpivm3crxv" ></a><span>Compute Engine
  management</span></h4>

  <p class="c9 c4"><span>Puppet Labs offers two modules for managing Compute Engine
  resources:</span></p>

  <ul class="c10 lst-kix_nqhy484r40db-0 start">
    <li class="c13 c4 "><span>node_gce</span></li>

    <li class="c13  c4"><span>gce_compute</span></li>
  </ul>

  <h5 class="c4"><a name="h.hfhfw8qmoks6" id=
  "h.hfhfw8qmoks6"></a><span>node_gce</span></h5>

  <p class="c9 c4"><span>The</span> <span class="c3"><a class="c5" target="_blank" href=
  "http://docs.puppetlabs.com/pe/latest/cloudprovisioner_overview.html">Cloud
  Provisioner</a></span><span>&nbsp;</span><span>Puppet</span><span>&nbsp;</span><span class="c3"><a class="c5"
  target="_blank" href=
  "https://github.com/puppetlabs/puppetlabs-cloud_provisioner">module</a></span><span>&nbsp;provides
  a set of command line tools (</span><span>node_gce</span><span>) for creating and
  destroying virtual instances, and for bootstrapping those instances with the Puppet
  client software. Cloud Provisioner can be used for several virtual machine types,
  including Google Compute Engine.</span></p>

  <h5 class="c4"><a name="h.tfwnzhvcjqol" id=
  "h.tfwnzhvcjqol"></a><span>gce_compute</span></h5>

  <p class="c9 c4"><span>The</span> <span class="c3"><a class="c5" target="_blank" href=
  "https://forge.puppetlabs.com/puppetlabs/gce_compute">gce_compute</a></span><span>&nbsp;Puppet
  module</span> <span>differs from the Cloud Provisioner in that, rather than providing
  command line tools, it enables Compute Engine resources to be treated as regular Puppet
  resources</span><span>. The following table lists the Puppet resource type for each
  Compute Engine resource:</span></p>

  <p class="c22 c52 c50 c21 c4"></p><a href="#" name=
  "b8eaa8a25a6c98e5df86a7e51b3830f04e1395d8" id=
  "b8eaa8a25a6c98e5df86a7e51b3830f04e1395d8"></a><a href="#" name="1"></a>

  <table cellpadding="0" cellspacing="0" class="c24">
    <tbody>
      <tr class="c15">
        <th class="c58 c44">
          <p class="c12 c22 c4"><span class="c30 c19">Resource</span></p>
        </th>

        <th class="c53 c44">
          <p class="c12 c22 c4"><span class="c30 c19">Puppet resource</span></p>
        </th>
      </tr>

      <tr class="c15">
        <td class="c58">
          <p class="c12 c4"><span>Instances</span></p>
        </td>

        <td class="c53">
          <p class="c22 c21 c4 c52"><span class="c1">gce_instance</span></p>
        </td>
      </tr>

      <tr class="c15">
        <td class="c58">
          <p class="c12 c4"><span>Disks</span></p>
        </td>

        <td class="c53">
          <p class="c22 c52 c21 c4"><span class="c1">gce_disk</span></p>
        </td>
      </tr>

      <tr class="c15">
        <td class="c58">
          <p class="c12 c4"><span>Networks</span></p>
        </td>

        <td class="c53">
          <p class="c22 c52 c21 c4"><span class="c1">gce_network</span></p>
        </td>
      </tr>

      <tr class="c15">
        <td class="c58">
          <p class="c12 c4"><span>Firewalls</span></p>
        </td>

        <td class="c53">
          <p class="c22 c52 c21 c4"><span class="c1">gce_firewall</span></p>
        </td>
      </tr>

      <tr class="c15">
        <td class="c58">
          <p class="c12 c22 c4"><span>Load Balancing</span></p>
        </td>

        <td class="c53">
          <p class="c12 c4"><span class="c8">gce_httphealthcheck<br />
          gce_targetpool<br />
          gce_targetpoolhealthcheck<br />
          gce_targetpoolinstance<br />
          gce_forwardingrule</span></p>
        </td>
      </tr>
    </tbody>
  </table>

  <p class="c9 c4"><span>Each Compute Engine resource is managed in a manner consistent
  with other Puppet resources provisioned using Puppet's DSL.</span> <span>See the</span>
  <span class="c3"><a class="c5" target="_blank" href="/developers/articles/google-compute-engine-management-puppet-chef-salt-ansible-appendix">Appendix</a></span><span>&nbsp;for a walk-through of getting started
  with Puppet and</span> <span>gce_compute</span><span>.</span></p>

  <h4 class="c4"><a name="h.okr26xyr2dvk" ></a><span>Puppet
  Standalone</span></h4>

  <p class="c4"><span>For a Compute Engine instance, the</span> <span class=
  "c11">gce_instance</span><span>&nbsp;resource provides a set of parameters to enable
  Puppet to provision the initial software on it. For example, you can specify a list
  of</span> <span class="c11">modules</span><span>&nbsp;to install, or you can specify an
  explicit Puppet</span> <span>manifest</span><span>.</span></p>

  <h5 class="c4"><a name="h.6jh7oqep20av" ></a><span>Upgrade model:
  restart and reinstall</span></h5>

  <p class="c4"><span>The</span> <span>provisioning on instance startup provided
  by</span> <span>gce_compute</span><span>&nbsp;enables a software upgrade model similar
  to the one</span> <span class="c3"><a class="c5" href="#h.a0sav3f2c64q">discussed
  above</a></span><span>,</span><span>&nbsp;</span><span>whereby the software on an
  instance is upgraded as follows:</span></p>

  <ol class="c10 lst-kix_30je0ku5cbkq-0 start" start="1">
    <li class="c23 c4"><span>Update the</span> <span class=
    "c11">gce_instance</span><span>&nbsp;</span><span>resource in the Puppet manifest to
    specify the new software.</span></li>

    <li class="c23 c4"><span>Use</span><span>&nbsp;Puppet to</span> <span>bring down the
    instance.</span></li>

    <li class="c23 c4"><span>Apply the updated Puppet manifest to start a new
    instance</span><span>&nbsp;and install the new software.</span></li>
  </ol>

  <h5 class="c4"><a name="h.mp1oldnr410q" ></a><span>Upgrade model:
  restart with a new</span> <span>boot disk</span></h5>

  <p class="c4"><span>The most significant step in the</span> <span class="c3"><a class=
  "c5" href="#h.5kjsugw1kowb">boot disk snapshot creation
  process</a></span><span>&nbsp;is the provisioning of software onto the disk.</span>
  <span>Provisioning software on a machine is</span> <span>Puppet's core
  capability.</span><span>&nbsp;I</span><span>f you have many instances that run the same
  software, you can use Puppet to install and configure that software on one instance,
  then</span> <span>snapshot</span><span>&nbsp;the boot disk for booting other
  instances.</span></p>

  <h5 class="c4"><a name="h.8h8pl9um2992" ></a><span>Upgrade model:
  upgrade software in-place</span></h5>

  <p class="c4"><span>Whether or not you use Puppet to bring up Compute Engine instances,
  you can manage the software on your instances with Puppet just as you would on physical
  hardware.</span> <span>Any machine with Puppet software installed may run the
  command:</span></p>

  <p class="c33 c4"><span class="c11">puppet apply</span> <span class=
  "c11 c0">file.pp</span></p>

  <p class="c4"><span>where</span> <span class="c11">file.pp</span><span>&nbsp;is a
  Puppet manifest file. This command invokes the Puppet agent to ensure that the
  resources configured in</span> <span class="c11">file.pp</span><span>&nbsp;are in the
  state specified.</span></p>

  <p class="c4"><span>If you have a Compute Engine instance with Puppet installed, you
  can upgrade the software either with an explicit push or an automated pull, as
  previously discussed in the</span> <span class="c3"><a class="c5" href=
  "#h.lentaphqyurs">Standalone
  model</a></span><span>&nbsp;section</span><span>.</span></p>

  <h4 class="c4"><a name="h.xz5svu6wdoqv" ></a><span>Puppet
  Master/Agent</span></h4>

  <p class="c9 c4"><span>Puppet Master/Agent offers centralized management and reporting
  for the software running on instances managed by Puppet. Puppet agent software on the
  Puppet-managed instances periodically (30 minutes by default) polls the master for the
  node-specific software catalog to apply. The Puppet agent then reports results back to
  the master.</span></p>

  <p class="c9 c4"><span>In the Master/Agent model, software</span>
  <span>management</span><span>&nbsp;is under the purview of the Puppet master service,
  but instance management is not. Instances and related resources can be managed entirely
  without Puppet, or if managed with Puppet, are handled outside of the master
  service.</span></p>

  <p class="c4"><span>For example, you could set up your master manifest
  (</span><span class="c11">site.pp</span><span>) to manage software for all of your web
  servers, and then choose to launch those instances using a different tool.</span></p>

  <p class="c4"><span>If you choose to use Puppet to launch your instances:</span></p>

  <ul class="c10 lst-kix_7n0v10719q8f-0 start">
    <li class="c23 c4"><span>Install the</span> <span class=
    "c11">gce_compute</span><span>&nbsp;module.</span></li>

    <li class="c23 c4"><span>Define a manifest with</span> <span class=
    "c11">gce_disk</span><span>,</span> <span class="c11">gce_instance</span><span>, and
    related resources.</span></li>

    <li class="c23 c4"><span>Configure the</span> <span class=
    "c11">gce_instance</span><span>&nbsp;resource</span> <span class=
    "c11">puppet_master</span><span>.</span></li>

    <li class="c23 c4"><span>Execute the manifest with</span> <span class=
    "c11">puppet</span><span>&nbsp;</span><span class="c11">apply.</span></li>
  </ul>

  <p class="c9 c4"><span>You can perform these operations from user workstations in your
  organization, or from the Puppet master instance, if you want to centralize all
  management,.</span></p>

  <p class="c50 c21 c4"></p>

  <h3 class="c22 c21 c4"><a name="h.aefmbipezuja" id=
  "h.aefmbipezuja"></a><span>Chef</span></h3>

  <p class="c4"><span class="c3"><a class="c5" target="_blank" href=
  "http://www.getchef.com/">Chef</a></span><span>&nbsp;is an open source software and
  resource management tool, first released in 2009.</span> <span>You can use Chef to
  provision Compute Engine instances as well as to</span>
  <span>manage</span><span>&nbsp;the software on the instances.</span></p>

  <p class="c4"><span>You can use Chef to manage Google Compute Engine instances and the
  software running on them as follows:</span></p>

  <ul class="c10 lst-kix_jfj6zfmg1qpw-0">
    <li class="c23 c4"><span>Instance management with the</span> <span class="c0">google
    knife</span><span>&nbsp;plugin</span></li>

    <li class="c23 c4"><span>Software deployment with</span> <span class=
    "c0">cookbooks</span><span>&nbsp;and</span> <span class="c0">recipes</span></li>

    <li class="c23 c4"><span>Boot disk preparation with</span> <span class=
    "c0">cookbooks</span><span>&nbsp;and</span> <span class="c0">recipes</span></li>
  </ul>

  <p class="c4"><span>Chef can be run in two modes, Master/Agent (Server/Client in Chef
  parlance) or C</span><span>hef-solo (S</span><span>tandalone). In the Server/Client
  model, the master maintains and</span> <span>versions</span><span>&nbsp;all cookbooks
  and recipes. The clients retrieve all recipes relevant for them from the master and
  apply them.</span></p>

  <h4 class="c62 c67 c4"><a name="h.ky0z56d9pvau" ></a><span>Compute
  Engine management</span></h4>

  <p class="c4"><span>Compute Engine resources can be managed with the</span>
  <span class="c3"><a class="c5" target="_blank" href=
  "https://github.com/opscode/knife-google">knife-google plugin</a></span><span>. The
  knife-google plugin can be used in the Server/Client as well as in the Standalone
  setup. The following functionality is available via the knife-google plugin:</span></p>

  <p class="c22 c50 c21 c4"></p><a href="#" name=
  "98c0a6041d2f3d0fe3a929e96e117b5586ff61aa"></a><a href="#" name="2"></a>

  <table cellpadding="0" cellspacing="0" class="c24">
    <tbody>
      <tr class="c15">
        <th class="c57 c44">
          <p class="c22 c18 c4"><span class="c30 c19">Resource</span></p>
        </th>

        <th class="c45 c44">
          <p class="c22 c18 c4"><span class="c19 c30">Commands</span></p>
        </th>
      </tr>

      <tr class="c15">
        <td class="c57">
          <p class="c18 c4"><span>Projects</span></p>
        </td>

        <td class="c45">
          <p class="c22 c21 c4"><span class="c1">knife google project list</span></p>
        </td>
      </tr>

      <tr class="c15">
        <td class="c57">
          <p class="c18 c4"><span>Regions</span></p>
        </td>

        <td class="c45">
          <p class="c22 c21 c4"><span class="c1">knife google region list</span></p>
        </td>
      </tr>

      <tr class="c15">
        <td class="c57">
          <p class="c18 c4"><span>Zones</span></p>
        </td>

        <td class="c45">
          <p class="c22 c21 c4"><span class="c1">knife google zone list</span></p>
        </td>
      </tr>

      <tr class="c15">
        <td class="c57">
          <p class="c18 c4"><span>Instances</span></p>
        </td>

        <td class="c45">
          <p class="c22 c21 c4"><span class="c1">knife google server create<br />
          knife google server delete<br />
          knife google server list</span></p>
        </td>
      </tr>

      <tr class="c15">
        <td class="c57">
          <p class="c18 c4"><span>Disks</span></p>
        </td>

        <td class="c45">
          <p class="c22 c21 c4"><span class="c1">knife google disk create<br />
          knife google disk delete<br />
          knife google disk list</span></p>
        </td>
      </tr>
    </tbody>
  </table>

  <p class="c4"><span>For a full walk-through of getting started with Chef on Google
  Compute Engine, refer to the</span> <span class="c3"><a class="c5" target="_blank" href="/developers/articles/google-compute-engine-management-puppet-chef-salt-ansible-appendix">Appendix</a></span><span>.</span></p>

  <h4 class="c67 c4"><a name="h.ancv1v9u62xm" ></a><span>Chef
  Standalone (</span><span>Chef-solo</span><span>)</span></h4>

  <p class="c9 c4"><span>Chef can be run in Standalone mode, which is referred to
  as</span> <span class="c3"><a class="c5" target="_blank" href=
  "http://docs.opscode.com/chef_solo.html">chef-solo</a></span><span>.</span></p>

  <p class="c9 c4"><span>Chef-solo requires you to install the chef-solo command line
  tool on the node. To run a recipe, run a command such as:</span></p>

  <p class="c9 c4 c37"><span class="c11">chef-solo -c ~/solo.rb -r
  http://www.example.com/chef-solo.tar.gz</span></p>

  <p class="c4 c9"><span>w</span><span>here</span><span class=
  "c11">&nbsp;solo.rb</span><span>&nbsp;is a configuration file, and</span> <span class=
  "c11">http://www.example.com/chef-solo.tar.gz</span><span>&nbsp;is a URL pointing to a
  recipe. For more information, see the</span> <span class="c3"><a class="c5" target="_blank" href=
  "http://docs.opscode.com/ctl_chef_solo.html">chef-solo
  documentation</a></span><span>.</span></p>

  <p class="c4"><span class="c54">As</span> <span class="c3"><a class="c5" href=
  "#h.c25j9hktsdc9">described above</a></span><span class="c54">, different</span>
  <span>models</span><span class="c54">&nbsp;are available for upgrading a
  node.</span></p>

  <h5 class="c14 c4"><a name="h.dggzhmzb97eg" ></a><span>Upgrade
  model: restart and reinstall</span></h5>

  <p class="c4"><span>The</span> <span class="c11">google-knife</span><span>&nbsp;plugin
  allows you to destroy and start new instances. Upgrading with a startup script involves
  the following steps:</span></p>

  <ol class="c10 lst-kix_qk47p2cx1tch-0 start" start="1">
    <li class="c23 c4"><span>U</span><span>se</span><span>&nbsp;</span><span class=
    "c11">google-knife</span><span>&nbsp;to take down the instance with</span>
    <span class="c29 c11">knife google server delete</span><span class="c1">.</span></li>

    <li class="c23 c4"><span>Use</span> <span class=
    "c11">google-knife</span><span>&nbsp;to create a new instance. The new instance must
    have metadata that set the startup script, which can be done by passing</span>
    <span class=
    "c11">--google-compute-metadata</span><span>&nbsp;to</span><span>&nbsp;</span><span class="c29 c11">knife
    google server create</span><span class="c1">.</span></li>
  </ol>

  <h5 class="c14 c4"><a name="h.2e0rztghwur2" ></a><span>Upgrade
  model: restart with a new boot disk</span></h5>

  <p class="c4"><span>Once an instance has been configured with Chef, you can</span>
  <span class="c3"><a class="c5" href="#h.5kjsugw1kowb">take a snapshot of the persistent
  disk</a></span><span>. Use this snapshot to create other instances with the same
  configuration.</span></p>

  <h5 class="c14 c4"><a name="h.icbcogq9h9ce" ></a><span>Upgrade
  model: upgrade software in place</span></h5>

  <p class="c4"><span>To upgrade software in place, do the following:</span></p>

  <ol class="c10 lst-kix_y8uhjlu9gsje-0 start" start="1">
    <li class="c23 c4"><span>Update the appropriate recipe(s).</span></li>

    <li class="c23 c4"><span>On the client, execute</span> <span class=
    "c11">knife-client</span><span>&nbsp;to apply the changes. Alternatively, in the
    Master/Agent model, the changes are applied automatically when the client pulls
    updates from the server.</span></li>
  </ol>

  <h4 class="c4 c67"><a name="h.ae21oh15q9kn" ></a><span>Chef
  Server/Client</span></h4>

  <p class="c4"><span>The Chef setup for Server/Client mode involves the following
  steps:</span></p>

  <ol class="c10 lst-kix_uzstehhvaua8-0 start" start="1">
    <li class="c23 c4"><span>Create a server and install master software on
    it.</span></li>

    <li class="c23 c4"><span>Create clients and</span> <span class=
    "c0">bootstrap</span><span>&nbsp;them; that is, install client software on them
    and</span> <span>connect them to the server.</span></li>

    <li class="c23 c4"><span>The server then associates recipes with clients.</span></li>
  </ol>

  <p class="c4"><span>Runtime software updates are applied as follows:</span></p>

  <ol class="c10 lst-kix_4fe8bgcdolnr-0 start" start="1">
    <li class="c23 c4"><span>Recipes are updated on the server.</span></li>

    <li class="c23 c4"><span>Clients poll the server every 30 minutes (by default) for
    updates to their recipes.</span></li>

    <li class="c23 c4"><span>Clients apply configuration changes in their
    recipes.</span></li>
  </ol>

  <p class="c22 c50 c21 c4"></p>

  <h3 class="c22 c21 c4"><a name="h.sohvtw94d90o" id=
  "h.sohvtw94d90o"></a><span>Salt</span></h3>

  <p class="c4"><span class="c3"><a class="c5" target="_blank" href=
  "http://en.wikipedia.org/wiki/Salt_(software)">Salt</a></span><span>&nbsp;is a software
  and resource management tool from</span> <span class="c3"><a class="c5" target="_blank" href=
  "http://www.saltstack.com/">SaltStack</a></span><span>,</span><span>&nbsp;first
  released in 2011</span><span>.</span> <span>SaltStack provides additional support and
  training with SaltStack Enterprise.</span></p>

  <p class="c4"><span>Salt can be used to manage Google Compute Engine instances and the
  software running on them. You can use Salt for:</span></p>

  <ul class="c10 lst-kix_bzfjo88sdbry-0 start">
    <li class="c23 c4"><span>Instance management with</span> <span class=
    "c0">salt-cloud</span></li>

    <li class="c23 c4"><span>Software deployment with State files</span></li>
  </ul>

  <p class="c4"><span>Salt may be run using the Master/Agent or Standalone model. The
  primary model for Salt is Master/Agent, using the push-model to rapidly distribute
  configuration changes. However, the Standalone model is useful for small environments,
  or for testing configuration changes on an isolated system before applying them to the
  full Master/Agent environment.</span></p>

  <p class="c4"><span>In Salt terminology, Agents are referred to as "minions", and SaLt
  State (SLS) files are used to describe their desired configuration. We will first
  discuss using Salt to bring up Compute Engine instances, and then address software
  provisioning in the two runtime models.</span></p>

  <h4 class="c62 c4"><a name="h.tvhcgihkisqv" ></a><span>Compute
  Engine management</span></h4>

  <p class="c4"><span>Salt includes a provisioning command called</span> <span class=
  "c11">salt-cloud</span><span>&nbsp;that can be used to create</span> <span class=
  "c3"><a class="c5" target="_blank" href=
  "http://salt.readthedocs.org/en/latest/topics/gce.html">Compute Engine
  instances</a></span><span>&nbsp;based on "profiles". A profile is a named collection of
  instance settings, such as</span> <span class="c11">location</span><span>&nbsp;(zone)
  and</span> <span class="c11">size</span><span>&nbsp;(machine type). The</span>
  <span class="c11">salt-</span><span class="c11">cloud</span><span>&nbsp;command</span>
  <span>&nbsp;also provides functionality to delete instances, query instance
  information, and list available attribute instance options such as size and
  location.</span></p>

  <h4 class="c62 c4"><a name="h.pnnv4qizfgq6" ></a><span>Salt
  Standalone</span></h4>

  <p class="c4"><span>Salt can be used on an individual node, and there are instructions
  for running in</span><span>&nbsp;</span><span class="c3"><a class="c5" target="_blank" href=
  "http://docs.saltstack.com/topics/tutorials/quickstart.html">masterless
  mode</a></span><span class="c0 c68">.</span><span class="c68">&nbsp;</span><span>Each
  of the upgrade models discussed earlier can be implemented with Salt Standalone,</span>
  <span>but the primary purpose of Salt Standalone is for testing state trees before
  deploying to a production Master/Agent setup</span><span>.</span></p>

  <h4 class="c4"><a name="h.pfgh86rf7o01" ></a><span>Salt
  Master/Agent</span></h4>

  <p class="c4"><span>Salt uses a high-speed message bus for the master to communicate
  software and configuration updates, in parallel, to the associated
  minions</span><span>.</span><span>&nbsp;The Salt agent on a minion is always connected
  and ready to accept commands from the master; it does not poll for
  updates</span><span>.</span></p>

  <p class="c4"><span>Provisioning a Compute Engine instance as master can be done using
  the</span> <span class="c11">salt-cloud</span><span>&nbsp;command with a named profile
  containing</span> <span class="c11">make_master: True</span><span>. An example of
  deploying a Salt master and minion with Google Compute Engine can be found in
  the</span><span>&nbsp;</span><span class="c3"><a class="c5" target="_blank" href="/developers/articles/google-compute-engine-management-puppet-chef-salt-ansible-appendix">Appendix</a></span><span>.</span></p>

  <h3 class="c4 c7"><a name="h.usxgbs7jgmuj" id=
  "h.usxgbs7jgmuj"></a><span>Ansible</span></h3>

  <p class="c4"><span class="c3"><a class="c5" target="_blank" href=
  "http://en.wikipedia.org/wiki/Ansible_(software)">Ansible</a></span><span>&nbsp;is a
  software and resource management tool from</span> <span class="c3"><a class="c5" target="_blank" href=
  "http://www.ansible.com">Ansible</a></span><span>,</span><span>&nbsp;first released in
  2012.</span> <span>Ansible strives to provide a less complex approach while still
  offering much of the same configuration management functionality as other
  tools.</span><span>&nbsp;Rather than a centralized authoritative configuration
  management server or an agent on the managed instances, Ansible most closely resembles
  the Standalone (Masterless) model. Managed instances are typically updated by
  administrators executing Ansible commands on their local workstation or laptop.
  Configuration files can be stored in a centralized version control system, as mentioned
  in the</span> <span class="c3"><a class="c5" href="#h.lentaphqyurs">Standalone
  introduction</a></span><span>.</span></p>

  <p class="c4"><span>Ansible remotely copies and executes generated Python scripts
  directly on the managed instances using SSH. Therefore, the only requirements for
  managing instances with Ansible are Python and SSH.</span></p>

  <p class="c4"><span>You can use</span> <span>Ansible for</span><span>:</span></p>

  <ul class="c10 lst-kix_w7lkssdfjc6j-0 start">
    <li class="c23 c4"><span>I</span><span>nstance management with the</span>
    <span class="c0">gce</span><span>&nbsp;module</span></li>

    <li class="c23 c4"><span>Software deployment with various standard
    modules</span></li>

    <li class="c23 c4"><span>Boot disk</span> <span>preparation</span><span>&nbsp;with
    the</span> <span class="c0">gce_pd</span><span>&nbsp;module</span></li>
  </ul>

  <p class="c9 c4"><span>Configuration specifications for Ansible's managed instances are
  defined in a playbook. Playbooks are YAML-formatted files containing collections of
  tasks that represent the desired state of the managed instance(s).</span></p>

  <p class="c9 c4"><span>Ansible also requires an inventory listing of instances to
  manage. Users will need to manage their inventory with a static file or a dynamic
  inventory plugin.</span></p>

  <h4 class="c4 c62"><a name="h.36p2nxijifj" ></a><span>Compute Engine
  management</span></h4>

  <p class="c4"><span>Ansible provides the capability to manage Compute Engine resources
  through separate modules. The table below lists Ansible modules and the</span>
  <span>covered</span><span>&nbsp;management options:</span></p>

  <p class="c22 c50 c21 c4"></p><a href="#" name=
  "53dfb53dfceebea2800108ba6d66ad4a75441265"></a><a href="#" name="3"></a>

  <table cellpadding="0" cellspacing="0" class="c24">
    <tbody>
      <tr class="c15">
        <th class="c27 c44">
          <p class="c22 c18 c4"><span class="c30 c19">Ansible Module</span></p>
        </th>

        <th class="c61 c44">
          <p class="c22 c18 c4"><span class="c30 c19">Resource management</span></p>
        </th>
      </tr>

      <tr class="c15">
        <td class="c27">
          <p class="c18 c4"><span>gce</span></p>
        </td>

        <td class="c61">
          <p class="c22 c21 c4"><span class="c1">instance create and destroy</span></p>
        </td>
      </tr>

      <tr class="c15">
        <td class="c27">
          <p class="c18 c4"><span>gce_pd</span></p>
        </td>

        <td class="c61">
          <p class="c22 c21 c4"><span class="c1">persistent disk create, destroy,
          instance attach and detach</span></p>
        </td>
      </tr>

      <tr class="c15">
        <td class="c27">
          <p class="c18 c4"><span>gce_lb</span></p>
        </td>

        <td class="c61">
          <p class="c22 c21 c4"><span class="c1">load-balancer create, destroy, and
          configure</span></p>
        </td>
      </tr>

      <tr class="c15">
        <td class="c27">
          <p class="c18 c4"><span>gce_net</span></p>
        </td>

        <td class="c61">
          <p class="c22 c21 c4"><span class="c1">networks and firewall rules create and
          destroy</span></p>
        </td>
      </tr>
    </tbody>
  </table>

  <p class="c4"><span>Ansible modules encapsulate both an action and the necessary
  variables required to complete the action for a given resource. In general, actions are
  triggered by the</span> <span class="c11">state</span><span>&nbsp;variable, which can
  be set to</span> <span class="c11">present</span><span>&nbsp;or</span> <span class=
  "c11">absent</span><span>&nbsp;to declare whether a particular resource should exist on
  the managed instance.</span></p>

  <p class="c9 c4"><span>Creating Compute Engine resources, managing them, and destroying
  them can be performed using the Ansible command for applying playbooks:</span></p>

  <p class="c9 c33 c4"><span class="c11">ansible-playbook -i inventory.ini
  gce-playbook.yml</span></p>

  <h5 class="c4"><a name="h.cd80l2qsyet6" ></a><span>Upgrade mode:
  restart and reinstall</span></h5>

  <p class="c4"><span>The Ansible gce module provides the ability to create and destroy
  instances. With this functionality, you can define a playbook to create, customize, and
  destroy an instance.</span></p>

  <h5 class="c4"><a name="h.d8w2sf3qitvu" ></a><span>Upgrade model:
  restart with a new boot disk</span></h5>

  <p class="c4"><span>Using the Ansible features discussed in the previous upgrade model,
  you can create a customized boot disk. This provides a clean way of following
  the</span> <span class="c3"><a class="c5" href="#h.5kjsugw1kowb">boot disk snapshot
  creation process</a></span><span>&nbsp;discussed above to</span>
  <span>perfect</span><span>&nbsp;and maintain a persistent disk that can then be used to
  generate snapshots for future instances.</span></p>

  <h5 class="c4"><a name="h.xyg40yykftch" ></a><span>Upgrade model:
  upgrade</span> <span>software in place</span></h5>

  <p class="c9 c4"><span>Ansible modules strive to be</span> <span class="c3"><a class=
  "c5" target="_blank" href=
  "http://en.wikipedia.org/wiki/Idempotence#Computer_science_meaning">idempotent</a></span><span>,
  meaning they will seek to avoid changes to the system unless a change needs to be made.
  This mechanism is essential for an iterative approach of editing a playbook and
  re-applying it such that only the new changes are applied to the instance. This is a
  common practice for developing a playbook and tuning it to ensure it can produce the
  desired state for an instance.</span></p>

  <h2 class="c4"><a name="h.8o9zek1c0te" ></a><span>Other
  Tools</span></h2>

  <p class="c4"><span>As much as we would have liked, we could not cover all tools for
  resources and software management. We did want to mention a few additional open source
  tools that are known to work with Google Compute Engine:</span></p>

  <ul class="c10 lst-kix_e4gw7n4s8t4i-0 start">
    <li class="c23  c4"><span>Packer -</span> <span>"a tool for creating identical
    machine images ... from a single source
    configuration"</span><span>&nbsp;</span><sup><a target="_blank" href="google-compute-engine-management-puppet-chef-salt-ansible-appendix.html#ftnt1" name="ftnt_ref1" id=
    "ftnt_ref1">[1]</a></sup><span><br /></span><span class="c3"><a class="c5" target="_blank" href=
    "http://www.packer.io/">http://www.packer.io/</a></span><span><br /></span><span class="c3"><a class="c5"
    target="_blank" href=
    "http://www.packer.io/docs/builders/googlecompute.html">http://www.packer.io/docs/builders/googlecompute.html</a></span></li>

    <li class="c23  c4"><span>Vagrant - "Create and configure lightweight,
    reproducible, and portable development environments."</span> <sup><a target="_blank" href="google-compute-engine-management-puppet-chef-salt-ansible-appendix.html#ftnt2"
    name="ftnt_ref2" >[2]</a></sup><span><br /></span><span class=
    "c3"><a class="c5" target="_blank" href=
    "http://www.vagrantup.com">http://www.vagrantup.com</a></span><span><br /></span><span class="c3"><a class="c5"
    target="_blank" href=
    "https://github.com/mitchellh/vagrant-google">https://github.com/mitchellh/vagrant-google</a></span></li>
  </ul>

  <p class="c4"><span>In addition, commercial tools are available from Google Cloud
  partners, which can be found at</span> <span class="c3"><a class="c5" target="_blank" href="/partners/technology-partners/compute-engine/">https://cloud.google.com/partners/technology-partners/compute-engine/</a></span><span>.</span></p>

  <h2 class="c4"><a name="h.z6tpfms4f3o0" id=
  "h.z6tpfms4f3o0"></a><span>Conclusion</span></h2>

  <p class="c9 c4"><span>This paper presents common scenarios for managing compute
  resources and software services on Google Compute Engine. We discussed a number of open
  source tools that aid with these common management tasks.</span></p>

  <p class="c9 c4"><span>Taking advantage of
  structured</span><span>&nbsp;configuration</span><span>, automatic software
  installation and updates, and a centralized repository of</span>
  <span>desir</span><span>ed end states for servers, much less of your team's time will
  be spent on manual configuration. T</span><span>hese tools can enable the members of
  your DevOps team to spend less time fighting fires and more time optimizing the
  innovative services that your engineering team creates.</span></p>

  <h2 class="c4"><a name="h.hx0my4kptaz3" id=
  "h.hx0my4kptaz3"></a><span>References</span></h2>

  <ul class="c10 lst-kix_e4gw7n4s8t4i-0">
    <li class="c23  c4"><span>gcutil<br /></span><span class="c3"><a class="c5" target="_blank" href=
    "https://developers.google.com/compute/docs/gcutil/">https://developers.google.com/compute/docs/gcutil/</a></span></li>

    <li class="c23  c4"><span>Ansible<br /></span><span class="c3"><a class="c5" target="_blank" href=
    "http://www.ansible.com/">http://www.ansible.com/</a></span><span><br /></span><span class="c3 c51"><a class="c5"
    target="_blank" href=
    "http://docs.ansible.com/gce_module.html">http://docs.ansible.com/gce_module.html</a></span></li>

    <li class="c23  c4"><span>Chef</span><br/>
      <span class="c3"><a class=
  "c5" target="_blank" href="http://www.getchef.com/">http://www.getchef.com/</a></span><br/>

      <span class="c3"><a class=
  "c5" target="_blank" href=
  "https://github.com/opscode/knife-google">https://github.com/opscode/knife-google</a></span><br/>
  </li>

    <li class="c23  c4"><span>Puppet<br /></span><span class="c3"><a class="c5" target="_blank" href=
    "https://forge.puppetlabs.com/puppetlabs/gce_compute">https://forge.puppetlabs.com/puppetlabs/gce_compute</a></span><span><br />
    </span><span class="c3"><a class="c5" target="_blank" href=
    "http://puppetlabs.com/presentations/puppet-now-google">http://puppetlabs.com/presentations/puppet-now-google</a></span><span><br />
    </span><span class="c3"><a class="c5" target="_blank" href=
    "http://puppetlabs.com/solutions/google-compute-engine">http://puppetlabs.com/solutions/google-compute-engine</a></span><span><br />
    </span><span class="c3"><a class="c5" target="_blank" href=
    "http://docs.puppetlabs.com/pe/latest/cloudprovisioner_gce.html">http://docs.puppetlabs.com/pe/latest/cloudprovisioner_gce.html</a></span></li>

    <li class="c23  c4"><span>Salt<br /></span><span class="c3"><a class="c5" target="_blank" href=
    "http://www.saltstack.com/">http://www.saltstack.com/</a></span><span><br /></span><span class="c3"><a class="c5"
    target="_blank" href=
    "http://salt.readthedocs.org/en/latest/topics/gce.html">http://salt.readthedocs.org/en/latest/topics/gce.html</a></span></li>
  </ul>

  <h2 class="c4"><a name="h.hmv3hesenwue" ></a><span>Appendix</span></h2>

  <p class="c9 c4"><span>
  Continue to the </span><span class="c3"><a class="c5"
  href="/developers/articles/google-compute-engine-management-puppet-chef-salt-ansible-appendix">Appendix</a></span></p>
</div>

<!-- /maia-main -->
</div>
</div>
</div>


  <!-- Scripts to include both on Goro + Devsite -->
  <script type="text/javascript">
   window.___gcfg = {
     lang: ''
   };
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
  </script>

  <!-- GTM implementation -->

  <!-- Start dataLayer -->
    <script>
      dataLayer = [{
        'country': '',
        'region': '',
        'language': ''
      }];
    </script>
  <!-- End dataLayer -->

  <!-- Start Google Tag Manager -->
  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5CVQBG"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-5CVQBG');</script>
  <!-- End Google Tag Manager -->

  <!-- Global JS scripts to load; path will depend on whether we're on devsite or Goro -->
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.15/angular.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.15/angular-sanitize.js"></script>

  <script src="/js/base.min.js"></script>

<!-- Secondary right-side scroll-nav -->
<script>
  new lfl.ui.ScrollNav({});
  new lfl.cloud.GlobalProductMenu();
</script>

<script>new cloud.SocialFeeds(document.getElementById('feeds'));</script>



  <div id="maia-signature"></div>
  <div id="maia-footer">

    <!-- maia-footer-local -->
    <div id="maia-footer-local">
      <div class="maia-aux">

          <div class="ent-footer-top">
  <div class="g-plus-wrapper">
    <div class="g-plusone" data-href="http://cloud.google.com"></div>
  </div>
  <div class="g-plus-link"><a href="https://plus.google.com/+googlecloudplatform" rel="publisher">Google+</a></div>
  <div class="search">
    <form onsumbit="return false;" class="maia-search">
    <input name="q" placeholder="Search this site" type="text">
    <input name="hl" type="hidden" value="">
    <input name="q" type="hidden" value="site:cloud.google.com/">
    <button class="maia-button" event="autotrack-data-g" data-g-event="Footer" data-g-action="Site Search" data-g-label="Submit">
      <span class="maia-search-icon">Search</span>
    </button>
    </form>
  </div>

</div>

<div class="ent-footer-links">
  <div class="ent-footer-unit">
    <h4><a href="/why-google/" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Why Google" data-g-label="Why Google">Why Google</a></h4>
    <ul>
      <li><a href="/why-google/#infrastructure" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Why Google" data-g-label="Infrastructure">Infrastructure</a></li>
      <li><a href="/why-google/#product" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Why Google" data-g-label="Product">Product</a></li>
      <li><a href="/why-google/#services" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Why Google" data-g-label="Services">Services</a></li>
      <li><a href="/why-google/#scalability" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Why Google" data-g-label="Scalability">Scalability</a></li>
      <li><a href="/why-google/#performance" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Why Google" data-g-label="Performance">Performance</a></li>
      <li><a href="/why-google/#support" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Why Google" data-g-label="Support">Support</a></li>
    </ul>
  </div>

  <div class="ent-footer-unit">
    <h4><a href="/products/" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Products" data-g-label="Products">Products</a></h4>
    <ul>
      <li><a href="/products/app-engine/" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Products" data-g-label="App Engine">App Engine</a></li>
      <li><a href="/products/compute-engine/" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Products" data-g-label="Compute Engine">Compute Engine</a></li>
      <li><a href="/products/cloud-storage/" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Products" data-g-label="Cloud Storage">Cloud Storage</a></li>
      <li><a href="/products/cloud-sql/" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Products" data-g-label="Cloud SQL">Cloud SQL</a></li>
      <li><a href="/products/cloud-datastore/" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Products" data-g-label="Cloud Datastore">Cloud Datastore</a></li>
      <li><a href="/products/bigquery/" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Products" data-g-label="BigQuery">BigQuery</a></li>
      <li><a href="/products/prediction-api/" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Products" data-g-label="Prediction API">Prediction API</a></li>
      <li><a href="/products/translate-api/" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Products" data-g-label="Translate API">Translate API</a></li>
      <li><a href="/products/cloud-endpoints/" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Products" data-g-label="Cloud Endpoints">Cloud Endpoints</a></li>
      <li><a href="/products/calculator/" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Products" data-g-label="Pricing Calculator">Pricing Calculator</a></li>
      <li><a href="/pricing/" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Products" data-g-label="Pricing">Pricing</a></li>
    </ul>
  </div>

  <div class="ent-footer-unit">
    <h4><a href="/solutions" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Solutions" data-g-label="Solutions">Solutions</a></h4>
    <ul>
      <li><a href="/solutions/mobile/" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Solutions" data-g-label="Mobile">Mobile</a></li>
      <li><a href="/solutions/gaming/" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Solutions" data-g-label="Gaming">Gaming</a></li>
      <li><a href="/solutions/hadoop/" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Solutions" data-g-label="Hadoop">Hadoop</a></li>
      <li><a href="/solutions/mongodb/" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Solutions" data-g-label="mongodb">MongoDB</a></li>
      <li><a href="/solutions/rabbitmq/" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Solutions" data-g-label="rabbitmq">RabbitMQ</a></li>
      <li><a href="/solutions/cassandra/" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Solutions" data-g-label="cassandra">Cassandra</a></li>
    </ul>
  </div>

  <div class="ent-footer-unit">
    <h4><a href="/customers/" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Customers" data-g-label="Customers">Customers</a></h4>
  </div>

  <div class="ent-footer-unit">
    <h4><a href="/developers/" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Developers" data-g-label="Developers">Developers</a></h4>
    <ul>
      <li><a href="/developers#documentation" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Developers" data-g-label="Documentation">Documentation</a></li>
      <li><a href="/developers#resources" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Developers" data-g-label="Resources">Resources</a></li>
    </ul>
  </div>

  <div class="ent-footer-unit">
    <h4><a href="/support/" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Support" data-g-label="Support">Support</a></h4>
    <ul>
      <li><a href="https://support.google.com/" target="_blank" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Support" data-g-label="Google Cloud Platform Support Help Center">Platform Support Help Center</a></li>
      <li><a href="https://support.google.com/cloudbilling/" target="_blank" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Support" data-g-label="Google Cloud Billing Help Center">Billing Help Center</a></li>
      <li><a href="https://enterprise.google.com/supportcenter" target="_blank" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Support" data-g-label="Google Enterprise Support Center">Google Enterprise Support Center</a></li>
    </ul>

  </div>


  <div class="ent-footer-unit">
    <h4><a href="/partners/" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Partners" data-g-label="Partners">Partners</a></h4>
    <ul>
      <li><a href="/partners/technology-partners/" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Partners" data-g-label="Find A Technology Partner">Technology Partners</a></li>
      <li><a href="/partners/service-partners/" event="autotrack-data-g" data-g-event="Footer" data-g-action="Footer Links: Partners" data-g-label="Find A Service Partner">Service Partners</a></li>
    </ul>
  </div>

  </div>
  <br class="clear" />

  </div>
  </div>
    <!-- /maia-footer-local -->

    <!-- maia-footer-global -->
    <div id="maia-footer-global">
      <div class="maia-aux">
        <ul>
          <li><a href="http://www.google.com/">Google</a></li>
          <li><a href="https://developers.google.com/readme/terms">Terms of Service</a></li>
          <li><a href="https://www.google.com/intl//policies/privacy/">Privacy Policy</a></li>
        </ul>
      </div>
    </div>
  </div>
  <!-- /maia-footer-global -->
  <script src="//www.google.com/js/maia.js"></script>
  <script type="text/javascript" async defer src="//www.gstatic.com/feedback/api.js"></script>
  <script id="jqueryui" src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.10/jquery-ui.min.js"></script>
  </body>
</html>
